!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ra=e():t.ra=e()}(this,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>b});class r{constructor(t){this.m=2147483648,this.a=1103515245,this.c=12345,this.state=t||window.Math.floor(window.Math.random()*(this.m-1))}nextInt(){return this.state=(this.a*this.state+this.c)%this.m,this.state}random(){return this.nextInt()/(this.m-1)}}class n{constructor(t){this.rndfn={random:()=>0},this.seed(t)}seed(t){this.rndfn=null==t?window.Math:"function"==typeof t?new t:new r(t)}uniform(t,e){return this.rndfn.random()*(e-t)+t}randint(t,e){return Math.floor(this.uniform(t,e))}choice(t){return t[Math.floor(this.rndfn.random()*t.length)]}choices(t,e){if("string"==typeof t){let r="";for(let n=0;n<e;n++)r+=this.choice(t);return r}if(Array.isArray(t)){let r=[];for(let n=0;n<e;n++)r.push(this.choice(t));return r}if("object"==typeof t){let t=Object.keys(t),r=[];for(let n=0;n<e;n++)r.push(this.choice(t));return r}}shuffle(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}distribution(t){if(t=Object.fromEntries(Object.entries(t).sort((([,t],[,e])=>e-t))),Math.abs(sum(Object.values(t))-1)>1e-7)throw"Distribution table probabilities must be equal to 1";let e,r=0,n=Math.random();for(e in t)if(r+=t[e],n<=r)return e}}function i(t){const e={};if(void 0===t)return e;if("object"==typeof t){t=t.entries?t.entries():Object.entries(t);for(const[r,n]of t)e[r]=n}else for(const r in t){const n=t[r];e[n[0]]=n[1]}return e}function s(t,e){return new Proxy({},{get:function(r,n){if(void 0!==r[n])return r[n];if("function"==typeof t){if(e)var i=t();else i=new t;return r[n]=i,i}}})}function o(t){if(void 0===t)return[];var e=[];for(var r of t)e.push(r);return e}const u={colors:{white:"#ffffff",violet:"#ee82ee",yellow:"#ffff00",gold:"#ffd700",gray:"#808080",green:"#008000",blue:"#0000ff",red:"#ff0000",black:"#000000",crimson:"#dc143c",cyan:"#00ffff",magenta:"#ff00ff",maroon:"#800000",orange:"#ffa500",olive:"#808000",navy:"#000080",tomato:"#ff6347",turquoise:"#40e0d0",teal:"#008080",salmon:"#fa8072",silver:"#c0c0c0",skyblue:"#87ceeb",snow:"#fffafa",pink:"#ffc0cb",purple:"#800080",wheat:"#f5deb3",azure:"#f0ffff",aqua:"#00ffff",indigo:"#4b0082",khaki:"#f0e68c",darkgray:"#a9a9a9"},blendmodes:{none:function(t,e){return t},normal:function(t,e){return e},darken:function(t,e){return Math.min(t,e)},multiply:function(t,e){return t*e/255},colorburn:function(t,e){return e<=0?0:Math.max(255-255*(255-t)/e,0)},linearburn:function(t,e){return Math.max(0,t+e-255)},lighten:function(t,e){return Math.max(t,e)},screen:function(t,e){return 255-(255-t)*(255-e)/255},colordodge:function(t,e){return e>=255?255:Math.min(255*t/(255-e),255)},lineardodge:function(t,e){return Math.min(t+e,255)},overlay:function(t,e){return t<128?2*t*e/255:255-2*(255-t)*(255-e)/255},softlight:function(t,e){return t<128?(64+(e>>1))*t*(2/255):255-(191-(e>>1))*(255-t)*(2/255)},hardlight:function(t,e){return e<128?2*t*e/255:255-2*(255-t)*(255-e)/255},difference:function(t,e){return Math.abs(t-e)},exclusion:function(t,e){return 255-((255-t)*(255-e)/255+t*e/255)},subtract:function(t,e){return Math.max(t-e,0)},inbetween:function(t,e){return(t+e)/2}},hue2rgb:(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t),hsl2rgb_arr(t,e,r){var n,i,s;if(0==e)n=i=s=r;else{var o=r<.5?r*(1+e):r+e-r*e,a=2*r-o;n=this.hue2rgb(a,o,t+1/3),i=this.hue2rgb(a,o,t),s=this.hue2rgb(a,o,t-1/3)}return n=round(255*n),i=round(255*i),s=round(255*s),[0,0,0]},cs_parse(t){let e=[];var r;if(null!==(r=/rgb\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})\)/.exec(t)))return n=r[1],i=r[2],s=r[3],["rgb",e];if(null!==(r=/rgba\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})\)/.exec(t)))return n=r[1],i=r[2],s=r[3],a=r[4],["rgba",e];if(null!==(r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t)))return n=parseInt(r[1],16),i=parseInt(r[2],16),s=parseInt(r[3],16),["hex",e];if(null!==(r=/hsv\((\d{1,3}),\s?(\d{1,3}\%),\s?(\d{1,3}\%)\)/.exec(t))){var n,i,s;let t=r[1]/360,a=r[2].substring(0,r[2].length-1)/100,f=r[3].substring(0,r[3].length-1)/100;var o=Math.floor(6*t),u=6*t-o,h=f*(1-a),l=f*(1-u*a),c=f*(1-(1-u)*a);switch(o%6){case 0:n=f,i=c,s=h;break;case 1:n=l,i=f,s=h;break;case 2:n=h,i=f,s=c;break;case 3:n=h,i=l,s=f;break;case 4:n=c,i=h,s=f;break;case 5:n=f,i=h,s=l}return n=round(255*n),i=round(255*i),s=round(255*s),["hsv",e]}if(null!==(r=/hsl\((\d{1,3}),\s?(\d{1,3}\%),\s?(\d{1,3}\%)\)/.exec(t))){let t=r[1]/360,e=r[2].substring(0,r[2].length-1)/100,n=r[3].substring(0,r[3].length-1)/100;return["hsl",this.hsl2rgb_arr(t,e,n)]}return[null,null]}};class h{constructor(t){this.m=t}get ncols(){return len(this.m[0])}get nrows(){return len(this.m)}clone(){return new h(this.to_array())}to_array(){const t=[];for(let e of range(this.nrows))t.push(this.m[e].slice());return t}is(t){switch(t){case"square":return this.ncols==this.nrows;case"identity":return!1;case"inversable":return 0!=this.determinant}throw Error("?")}map(t){return this.m.map(((e,r)=>e.map(((e,n)=>t.bind(this)(e,r,n)))))}iter(t){return this.m.forEach(((e,r)=>e.map(((e,n)=>t.bind(this)(e,r,n)))))}iter_with(t,e){if(this.ncols!=t.ncols||this.nrows!=t.nrows)throw Error("grrrrrrrrrrrr");return this.iter(((r,n,i)=>e.bind(this)(r,t.m[n][i],n,i)))}transpose(){const t=this.to_array();return new h(t[0].map(((e,r)=>t.map((t=>t[r])))))}get determinant(){}inverse(){}get identity(){}equal(t){if(!(t instanceof h))throw new Error("param is not type of Matrix");if(this.ncols!=t.ncols||this.nrows!=t.nrows)return!1;let e=!0;return this.iter_with(t,((t,r,n,i)=>{t!=r&&(e=!1)})),e}mul(t){if(!(t instanceof h))throw new Error("param is not type of Matrix");if(this.ncols!=t.nrows)throw new Error("matrix dimension mismatch");let e=new Array(this.m.length).fill(0).map((e=>new Array(t.m[0].length).fill(0)));return new h(e.map(((e,r)=>e.map(((e,n)=>this.m[r].reduce(((e,r,i)=>e+r*t.m[i][n]),0))))))}div(t){}add(t){}sub(t){}static vector(t){return new h([t])}static cvector(t){return new h([t]).transpose()}}class l{clone(){var t=new l;return t.r=this.r,t.g=this.g,t.b=this.b,t.a=this.a,t}withalpha(t){var e=this.clone();return e.a=t,e}add(t){var e=new l;return e.r=clamp(this.r+t.r),e.g=clamp(this.g+t.g),e.b=clamp(this.b+t.b),e.a=clamp((this.a??1)+(t.a??1)),e}sub(t){var e=new l;return e.r=clamp(this.r-t.r),e.g=clamp(this.g-t.g),e.b=clamp(this.b-t.b),e.a=clamp((this.a??1)-(t.a??1)),e}blend(t,e){var r=new l,n=u.blendmodes[e];return r.r=clamp(Math.round(n(this.r,t.r))),r.g=clamp(Math.round(n(this.g,t.g))),r.b=clamp(Math.round(n(this.b,t.b))),r}interpolate(t,e){let r=[];for(let n of range(3)){let i=this.c[n],s=t.c[n],o=s-i,a=Math.min(i,s);r[n]=Math.round(o<0?-o*(1-e):o*e+a)}return new l(r)}cmp(t){var e=255-Math.abs(this.r-t.r),r=255-Math.abs(this.g-t.g),n=255-Math.abs(this.b-t.b);return((e/=255)+(r/=255)+(n/=255))/3}shade(t){var e=String(this.hex()).replace(/[^0-9a-f]/gi,"");e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var r,n,i="#";for(n=0;n<3;n++)r=parseInt(e.substring(2*n,2),16),i+=("00"+(r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16))).substring(r.length);return new l(i)}get contrast(){return this.yiq>=128?"black":"white"}get complement(){let[t,e,r]=this.to_hsl();return t*=360,t+=180,t%=360,new l(`hsl(${round(t)},${round(100*e)}%,${round(100*r)}%)`)}get yiq(){return(299*this.r+587*this.g+114*this.b)/1e3}get rgba(){return`rgba(${round(this.r)},${round(this.g)},${round(this.b)},${round(this.a??1)})`}get rgb(){return`rgb(${round(this.r)},${round(this.g)},${round(this.b)})`}get hsl(){let[t,e,r]=this.to_hsl();return`hsl(${round(360*t)},${round(100*e)}%,${round(100*r)}%)`}get hsv(){let[t,e,r]=this.to_hsv();return`hsv(${round(360*t)},${round(100*e)}%,${round(100*r)}%)`}get hex(){var t=clamp(round(this.r)).toString(16),e=clamp(round(this.g)).toString(16),r=clamp(round(this.b)).toString(16);return"#"+(1==t.length?"0"+t:t)+(1==e.length?"0"+e:e)+(1==r.length?"0"+r:r)}to_array(t){switch(t){case null:case"rgb":case"rgba":return this.c.splice(0);case"hsv":case"hsb":return this.to_hsv();case"hsl":return this.to_hsl();case"yuv":return this.to_yuv()}return null}to_hsl(){let[t,e,r]=[this.r,this.g,this.b];t/=255,e/=255,r/=255;var n,i,s=Math.max(t,e,r),o=Math.min(t,e,r),a=(s+o)/2;if(s==o)n=i=0;else{var u=s-o;switch(i=a>.5?u/(2-s-o):u/(s+o),s){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return[n,i,a]}to_hsv(){let[t,e,r]=[this.r,this.g,this.b];t/=255,e/=255,r/=255;var n,i,s=Math.max(t,e,r),o=Math.min(t,e,r),a=s,u=s-o;if(i=0==s?0:u/s,s==o)n=0;else{switch(s){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return[n,i,a]}to_yuv(){let t=new h([[.2126,.7152,.0722],[-.09991,-.33609,.436],[.615,-.55861,-.05639]]).mul(h.cvector(this.c));return[t.m[0][0],t.m[1][0],t.m[2][0]]}constructor(...t){1==len(t)?t=t[0]:0==len(t)&&(t=[0,0,0,1]);const e=typeof t;if(Array.isArray(t))this.c=t;else if("object"===e)this.c=[t.r,t.g,t.b,t.a??1];else if("string"===e){let[e,r]=u.cs_parse(t.toLowerCase());null==e&&console.error("Could not parse string as color: "+t),this.c=r}else if("number"===e){var r=2654435761*t%Math.pow(2,32);r>>>=0,this.a||this.push(0),this.b=255&r,this.g=(65280&r)>>>8,this.r=(16711680&r)>>>16,this.a=((4278190080&r)>>>24)/255}}static clamp(t){return t<0?0:t>255?255:t}static from_yuv(...t){const e=h([[1,0,1.28033],[1,-.21482,-.38059],[1,2.12798,0]]).mul(h.cvector(t)).transpose().to_array()[0];return new l(e.map(round).map(l.clamp))}static from_hsl(t,e,r){return new l(...u.hsl2rgb_arr(t,e,r))}toString(){return this.rgba}}function c(t){return new Promise(((e,r)=>{e(t)}))}function f(t){var e=t[0],r=t.substr(1);return"#"==e?document.getElementById(r):"."==e?document.getElementsByClassName(r):document.getElementsByTagName(t)}function d(t){const e="function"==typeof t?new t:t;return new Proxy(e.target,new class{get(t,r){return e.__getitem__(r)}set(t,r,n){e.__setitem__(r,n)}has(t,r){return new Boolean(e.__getitem__(r))}deleteProperty(t,r){e.__delitem__(r)}})}function m(t,e,r){let n=t+"="+e+"; path=/",i=new Date;"number"==typeof r?(i.setTime(i.getTime()+3600*r*1e3),n+="; expires="+i.toUTCString()):r&&(i.setFullYear(i.getFullYear()+1),n+="; expires="+i.toUTCString()),document.cookie=n}function p(t){return(window.URL||window.webkitURL).createObjectURL(t)}const b={Title:new class{constructor(t){this.orig_title=document.title,this.format="{0}",t&&this.update(t)}update(...t){document.title=this.format.format(...t)}},Cookies:d(class{constructor(){this.target={setcookie:m},this.persistent=!0}__getitem__(t){if("setcookie"==t)return this.target.setcookie;let e=("; "+document.cookie).split("; "+t+"=");return 2==e.length?e.pop().split(";").shift():def}__setitem__(t,e){m(t,e,this.persistent)}__delitem__(t){m(t,"",-1)}}),Params:d(class{constructor(){this.target=new URLSearchParams(window.location.search)}__getitem__(t){return this.target.get(t)}__setitem__(t,e){this.target.set(t,e),window.location.search=this.target.toString()}__delitem__(t){this.target.delete(t),window.location.search=this.target.toString()}}),SlugParams:new class{constructor(){let t=window.location.pathname.substring(1);this.arr=t.split("/"),""==this.arr[0]&&this.arr.splice(0,1)}get path(){return"/"+this.arr.join("/")}set path(t){"/"==t[0]&&(t=t.substring(1)),this.arr=t.split("/"),""==this.arr[0]&&this.arr.splice(0,1),history.pushState({},"",this.path)}subpath(t,e){return"/"+this.arr.slice(t,e).join("/")}add(t){(t=t.substring(1))?(this.arr.push(t),history.pushState({},"",this.path)):console.error("empty string can't be added")}pop(){const t=this.arr.pop();return history.pushState({},"",this.path),t}clear(){this.arr=[],history.pushState({},"",this.path)}empty(){return 0==this.arr.length}},clipboard_copy:function(t){const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},Import:class{css(t){let e=document.createElement("link");e.href=t,e.rel="stylesheet",f("head")[0].appendChild(e)}js(t,e){let r=document.createElement("script");r.src=t,e&&(r.type="module"),f("head")[0].appendChild(r)}},dom:f,as_async:c,animate:function(t){let e=0,r=n=>{e||(e=n);let i=n-e;e=n,t(n,i,n-0)&&window.requestAnimationFrame(r)};window.requestAnimationFrame(r)},File:class{constructor(t,...e){switch(this._blob=null,this._bytes=null,this._url=null,this._mime=null,this._filename=null,t){case"blob":case"file":this._blob=e[0],this._mime=e[1]||this._blob.type,this._filename=e[2]||this._blob.name;break;case"array":case"bytes":this._bytes=e[0],this._mime=e[1]||null,this._filename=e[2]||null;break;case"url":this._url=e[0],this._mime=e[1]||null,this._filename=e[2]||null;break;default:console.error("unkonwn file descriptor",t)}}get blob(){if(null==this._blob)if(null!=this._bytes)this._blob=(t=this._bytes,e=this._mime,new Blob([new Uint8Array(t)],{type:e}));else if(null!=this._url)return async function(t){return fetch(t).then((t=>t.blob()))}(this._url,this.mime,this.filename).then((t=>(this._blob=t,this._blob)));var t,e;return c(this._blob)}get bytes(){if(null==this._bytes){if(null!=this._blob)return async function(t,e){return e=e||"UTF-8",new Promise(((e,r)=>{let n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=r,n.readAsArrayBuffer(t)}))}(this._blob).then((t=>(this._bytes=t,this._bytes)));if(null!=this._url)return async function(t){return fetch(t).then((t=>t.arrayBuffer()))}(this._url).then((t=>(this._bytes=t,this._bytes)))}return c(this._bytes)}get url(){var t,e;return null==this._url&&(null!=this._blob?this._url=p(this._blob):null!=this._bytes&&(this._url=(t=this._bytes,e=this._mime,p(new Blob([t],{type:e}))))),c(this._url)}get mime(){return this._mime}get filename(){return this._filename}get checksum(){return null==this._checksum&&this.bytes.then((t=>{console.error("TODO: Get md5 of bytes file")})),c(this._checksum)}async download(){if(null!=this._url)return void window.open(this._url);const t=await this.blob,e=this.filename;if(navigator.msSaveBlob)navigator.msSaveBlob(t,e);else{const r=document.createElement("a");if(void 0!==r.download){let n;console.log(t),n=p(t),console.log(n),r.setAttribute("href",n),r.setAttribute("download",e),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}},Http:class{constructor(t,e){this.base_url=t,this.post_url={},this.access_token=e,"/"!=this.base_url[this.base_url.length-1]&&(this.base_url+="/")}request_callback(t,e,r){return null==e&&(e={}),void 0===r&&"function"==typeof e&&(r=e,e={}),this.request(t,e).then(r)}request(t,e){const r=t.split(" ")[0].upper();let n=t.substr(len(r)+1,len(t));n=n.replace("//","/"),n=n.replace("//","/"),n=n.replace("//","/"),"/"==n[0]&&(n=n.substring(1)),"GET"==r&&(e=Object.assign({},this.post_url,e),Object.keys(e).length>0&&(n+="?"+Object.keys(e).map((t=>t+"="+e[t])).join("&")));const i={"Content-Type":"application/json"};return this.access_token&&(i.Authorization="bearer "+this.access_token),fetch(this.base_url+n,{method:r,mode:this.mode||"cors",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",credentials:"omit",body:"GET"==r?void 0:JSON.stringify(e),headers:i}).then((t=>{if(200==t.status)return t.json();throw t}))}},Events:new class{constructor(){this.events=s(o,!0),this.events_once=s(o,!0),this.events_fired=s((()=>!1),!0)}on(t,e){this.events[t].push(e)}once(t,e){this.events_once[t].push(e)}past(t,e){if(!this.events_fired[t])return this.once(t,e);e()}clear(t){this.events[t]=[],this.events_once[t]=[]}fire(t,...e){for(var r of this.events[t])r(...e);for(var r of this.events_once[t])r(...e);this.events_once[t]=[],this.events_fired[t]=!0}},Random:n,Color:l,Matrix:h,init(t){var e,r;t=t||!1,Number.prototype.estimation=Number.prototype.estimation||function(){return this>999999999?(this/1e9).toFixed(1)+"B":this>999999?(this/1e6).toFixed(1)+"M":this>999?(this/1e3).toFixed(1)+"k":String(this)},Number.prototype.roman=Number.prototype.roman||function(){for(var t=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=this,n="",i=0;i<t.length;i++)for(;t[i]<=r;)n+=e[i],r-=t[i];return n},Number.prototype.ordinal=Number.prototype.ordinal||function(){var t=this%10,e=this%100;return 1==t&&11!=e?this+"st":2==t&&12!=e?this+"nd":3==t&&13!=e?this+"rd":this+"th"},e=t?window:this,String.prototype.format=String.prototype.format||function(){var t=this.toString();if(arguments.length){var e,r=typeof arguments[0],n="string"===r||"number"===r?Array.prototype.slice.call(arguments):arguments[0];for(e in n)t=t.replace(new RegExp("\\{"+e+"\\}","gi"),n[e])}return t},String.prototype.title=String.prototype.title||function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()},String.prototype.lower=String.prototype.lower||function(){return this.toLowerCase()},String.prototype.upper=String.prototype.upper||function(){return this.toUpperCase()},String.prototype.encode=String.prototype.encode||function(t){return new TextEncoder(t).encode(this)},ArrayBuffer.prototype.decode=ArrayBuffer.prototype.decode||function(t,e){return new TextDecoder(t).decode(this,e)},Set.prototype.update=Set.prototype.update||function(t){for(var e of t)this.add(e)},Object.items=Object.items||Object.entries||function(t){let e=[];for(let r in t)e.push([r,t[r]]);return e},e.str=function(t){return void 0===t?"":"string"==typeof t?t:t.toString()},e.float=function(t){return void 0===t?0:"string"==typeof t?parseFloat(t):"number"==typeof t?t:void 0},e.int=function(t){return void 0===t?0:"string"==typeof t?parseInt(t):"number"==typeof t?t:void 0},e.bool=function(t){return void 0!==t&&Boolean(t)},e.dict=i,e.list=o,e.bytes=function(t,e){if(Array.isArray(t)){if("utf-8"==e)return new Uint32Array(t);if("ascii"==e||!e)return new Uint8Array(t);if("string"==typeof t)return t.encode(e)}},e.defaultdict=s,e.time=function(){return window.Math.floor((new Date).getTime()/1e3)},e.len=function(t){if(t.length)return t.length;if(t.size)return"function"==typeof t.size?t.size():t.size;if("object"==typeof t)return Object.keys(t).length;throw"Type "+typeof t+" has no 'len' property."},e.any=function(t){for(var e=0;e<t.length;++e)if(t[e])return!0;return!1},e.all=function(t){for(var e=0;e<t.length;++e)if(!t[e])return!1;return!0},e.round=function(t,e){return e?parseFloat(t.toFixed(e)):window.Math.round(t)},e.Enum=function(...t){let e={},r=0;for(let n of t)e[n]=r++;return Object.freeze(e)},window.Math.log=(r=window.Math.log,function(t,e){return r(t)/(e?r(e):1)}),e.random=new n,e.sum=function(...t){return 0==len(t)?0:(1==len(t)&&Array.isArray(t[0])&&(t=t[0]),t.reduce((function(t,e){return t+e}),0))},t&&(window.$=f)}};return e.default})()));