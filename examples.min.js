(()=>{"use strict";function t(t,e){return new Proxy({},{get:function(s,r){if(void 0!==s[r])return s[r];if("function"==typeof t){if(e)var i=t();else i=new t;return s[r]=i,i}}})}function e(t){if(void 0===t)return[];var e=[];for(var s of t)e.push(s);return e}function s(t){const e="function"==typeof t?new t:t;return new Proxy(e.target,new class{get(t,s){return e.__getitem__(s)}set(t,s,r){e.__setitem__(s,r)}has(t,s){return new Boolean(e.__getitem__(s))}deleteProperty(t,s){e.__delitem__(s)}})}function r(t,e,s){let r=t+"="+e+"; path=/",i=new Date;"number"==typeof s?(i.setTime(i.getTime()+3600*s*1e3),r+="; expires="+i.toUTCString()):s&&(i.setFullYear(i.getFullYear()+1),r+="; expires="+i.toUTCString()),document.cookie=r}new class{constructor(t){this.orig_title=document.title,this.format="{0}",t&&this.update(t)}update(...t){document.title=this.format.format(...t)}},s(class{constructor(){this.target={setcookie:r},this.persistent=!0}__getitem__(t){if("setcookie"==t)return this.target.setcookie;let e=("; "+document.cookie).split("; "+t+"=");return 2==e.length?e.pop().split(";").shift():def}__setitem__(t,e){r(t,e,this.persistent)}__delitem__(t){r(t,"",-1)}}),s(class{constructor(){this.target=new URLSearchParams(window.location.search)}__getitem__(t){return this.target.get(t)}__setitem__(t,e){this.target.set(t,e),window.location.search=this.target.toString()}__delitem__(t){this.target.delete(t),window.location.search=this.target.toString()}}),new class{constructor(){let t=window.location.pathname.substring(1);this.arr=t.split("/"),""==this.arr[0]&&this.arr.splice(0,1)}get path(){return"/"+this.arr.join("/")}set path(t){"/"==t[0]&&(t=t.substring(1)),this.arr=t.split("/"),""==this.arr[0]&&this.arr.splice(0,1),history.pushState({},"",this.path)}subpath(t,e){return"/"+this.arr.slice(t,e).join("/")}add(t){(t=t.substring(1))?(this.arr.push(t),history.pushState({},"",this.path)):console.error("empty string can't be added")}pop(){const t=this.arr.pop();return history.pushState({},"",this.path),t}clear(){this.arr=[],history.pushState({},"",this.path)}empty(){return 0==this.arr.length}},new class{constructor(){this.events=t(e,!0),this.events_once=t(e,!0),this.events_fired=t((()=>!1),!0)}on(t,e){this.events[t].push(e)}once(t,e){this.events_once[t].push(e)}past(t,e){if(!this.events_fired[t])return this.once(t,e);e()}clear(t){this.events[t]=[],this.events_once[t]=[]}fire(t,...e){for(var s of this.events[t])s(...e);for(var s of this.events_once[t])s(...e);this.events_once[t]=[],this.events_fired[t]=!0}}})();